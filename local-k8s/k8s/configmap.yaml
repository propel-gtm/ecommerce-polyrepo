apiVersion: v1
kind: ConfigMap
metadata:
  name: ecommerce-config
  namespace: ecommerce
  labels:
    app.kubernetes.io/name: ecommerce
    app.kubernetes.io/component: config
data:
  # Environment
  ENVIRONMENT: "local"
  LOG_LEVEL: "DEBUG"

  # Database Configuration
  DATABASE_HOST: "postgres"
  DATABASE_PORT: "5432"
  DATABASE_NAME: "ecommerce"

  # Redis Configuration
  REDIS_HOST: "redis"
  REDIS_PORT: "6379"

  # Service Discovery - Internal DNS names
  USER_SERVICE_HOST: "svc-user-django"
  USER_SERVICE_REST_PORT: "8000"
  USER_SERVICE_GRPC_PORT: "50051"

  LISTING_SERVICE_HOST: "svc-listing-spring"
  LISTING_SERVICE_REST_PORT: "8080"
  LISTING_SERVICE_GRPC_PORT: "9090"

  INVENTORY_SERVICE_HOST: "svc-inventory-rails"
  INVENTORY_SERVICE_REST_PORT: "3000"
  INVENTORY_SERVICE_GRPC_PORT: "50051"

  API_GATEWAY_HOST: "be-api-gin"
  API_GATEWAY_PORT: "8080"

  FRONTEND_HOST: "fe-nextjs"
  FRONTEND_PORT: "3000"

  # gRPC Configuration
  GRPC_KEEPALIVE_TIME: "30s"
  GRPC_KEEPALIVE_TIMEOUT: "5s"
  GRPC_MAX_MESSAGE_SIZE: "4194304"

  # Application Configuration
  JWT_EXPIRATION: "3600"
  CORS_ORIGINS: "*"
  RATE_LIMIT_PER_MINUTE: "100"

  # Feature Flags (local development)
  ENABLE_DEBUG_ENDPOINTS: "true"
  ENABLE_SWAGGER: "true"
  ENABLE_METRICS: "true"
  ENABLE_TRACING: "false"
---
# Frontend-specific configuration
apiVersion: v1
kind: ConfigMap
metadata:
  name: fe-nextjs-config
  namespace: ecommerce
  labels:
    app.kubernetes.io/name: fe-nextjs
    app.kubernetes.io/component: frontend
data:
  NODE_ENV: "development"
  NEXT_PUBLIC_API_URL: "http://be-api-gin:8080"
  NEXT_PUBLIC_WS_URL: "ws://be-api-gin:8080"
  NEXT_TELEMETRY_DISABLED: "1"
---
# API Gateway configuration
apiVersion: v1
kind: ConfigMap
metadata:
  name: be-api-gin-config
  namespace: ecommerce
  labels:
    app.kubernetes.io/name: be-api-gin
    app.kubernetes.io/component: api-gateway
data:
  GIN_MODE: "debug"
  PORT: "8080"
  READ_TIMEOUT: "30"
  WRITE_TIMEOUT: "30"
  SHUTDOWN_TIMEOUT: "30"
  USER_SERVICE_GRPC_ADDR: "svc-user-django:50051"
  LISTING_SERVICE_GRPC_ADDR: "svc-listing-spring:9090"
  INVENTORY_SERVICE_GRPC_ADDR: "svc-inventory-rails:50051"
---
# User Service configuration
apiVersion: v1
kind: ConfigMap
metadata:
  name: svc-user-django-config
  namespace: ecommerce
  labels:
    app.kubernetes.io/name: svc-user-django
    app.kubernetes.io/component: user-service
data:
  DEBUG: "1"
  DJANGO_SETTINGS_MODULE: "user_service.settings"
  ALLOWED_HOSTS: "*"
  CORS_ALLOWED_ORIGINS: "*"
  REST_PORT: "8000"
  GRPC_PORT: "50051"
---
# Listing Service configuration
apiVersion: v1
kind: ConfigMap
metadata:
  name: svc-listing-spring-config
  namespace: ecommerce
  labels:
    app.kubernetes.io/name: svc-listing-spring
    app.kubernetes.io/component: listing-service
data:
  SPRING_PROFILES_ACTIVE: "docker"
  SERVER_PORT: "8080"
  GRPC_PORT: "9090"
  JPA_DDL_AUTO: "update"
  JPA_SHOW_SQL: "true"
  H2_CONSOLE_ENABLED: "false"
---
# Inventory Service configuration
apiVersion: v1
kind: ConfigMap
metadata:
  name: svc-inventory-rails-config
  namespace: ecommerce
  labels:
    app.kubernetes.io/name: svc-inventory-rails
    app.kubernetes.io/component: inventory-service
data:
  RAILS_ENV: "development"
  RAILS_LOG_TO_STDOUT: "true"
  RAILS_MAX_THREADS: "5"
  WEB_CONCURRENCY: "2"
  REST_PORT: "3000"
  GRPC_PORT: "50051"
